{
    "allMappings": [
        {
            "fromApp": "diaspora",
            "toApps": [
                {
                    "name": "mastodon",
                    "methods": [],
                    "inputs": [
                        {
                            "name": "visibility0",
                            "value": "0"
                        },
                        {
                            "name": "visibility3",
                            "value": "3"
                        },
                        {
                            "name": "reply1",
                            "value": "False"
                        },
                        {
                            "name": "reply2",
                            "value": "True"
                        }
                    ],
                    "mappings": [
                        {
                            "fromTables": ["users","people","profiles"],
                            "toTables": [
                                {
                                    "table": "accounts",
                                    "conditions":{},
                                    "mapping": {
                                        "id": "people.id",
                                        "username":"users.username",
                                        "private_key":"users.serialized_private_key",
                                        "created_at":"users.created_at",
                                        "updated_at":"users.updated_at",
                                        "public_key":"people.serialized_public_key",
                                        "display_name":"people.diaspora_handle",
                                        "note":"profiles.bio",
                                        "avatar_remote_url":"profiles.image_url"
                                    }
                                },
                                {
                                    "table": "users",
                                    "conditions":{},
                                    "mapping": {
                                        "id":"users.id",
                                        "email":"users.email",
                                        "encrypted_password":"users.encrypted_password",
                                        "reset_password_token":"users.reset_password_token",
                                        "reset_password_sent_at":"users.reset_password_sent_at",
                                        "remember_created_at":"users.remember_created_at",
                                        "sign_in_count":"users.sign_in_count",
                                        "current_sign_in_at":"users.current_sign_in_at",
                                        "last_sign_in_at":"users.last_sign_in_at",
                                        "current_sign_in_ip":"users.current_sign_in_ip",
                                        "last_sign_in_ip":"users.last_sign_in_ip",
                                        "unconfirmed_email":"users.unconfirmed_email",
                                        "created_at":"users.created_at",
                                        "updated_at":"users.updated_at",
                                        "account_id":"#REF(people.id,people.id)"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["posts"],
                            "toTables": [
                                {
                                    "table": "statuses",
                                    "conditions":{
                                        "posts.type": "StatusMessage"
                                    },
                                    "mapping": {
                                        "id": "statuses.id",
                                        "account_id": "#REF(posts.author_id,people.id)",
                                        "text":"posts.text",
                                        "created_at":"posts.created_at",
                                        "updated_at":"posts.updated_at",
                                        "visibility": "$visibility0",
                                        "reply": "$reply1",
                                        "conversation_id": "#REF(posts.id,posts.id)"
                                    }
                                },
                                { 
                                    "table": "status_stats",
                                    "conditions": {
                                        "posts.type": "StatusMessage"
                                    },
                                    "mapping":{
                                        "id": "posts.id",
                                        "status_id":"#REF(posts.id,posts.id)",
                                        "created_at":"posts.created_at",
                                        "updated_at":"posts.updated_at",
                                        "replies_count": "posts.comments_count",
                                        "favourites_count": "posts.likes_count",
                                        "reblogs_count": "posts.reshares_count"
                                    }
                                },
                                {
                                    "table": "conversations",
                                    "conditions":{
                                        "posts.type": "StatusMessage"
                                    },
                                    "mapping": {
                                        "id":"posts.id",
                                        "created_at":"posts.created_at",
                                        "updated_at":"posts.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["photos"],
                            "toTables": [
                                {
                                    "table": "media_attachments",
                                    "conditions":{
                                    },
                                    "media": {
                                        "path": "photos.remote_photo_path"
                                    },
                                    "mapping": {
                                        "id": "photos.id",
                                        "account_id":"#REF(photos.author_id,people.id)",
                                        "status_id":"#REF(#FETCH(posts.id,posts.guid,photos.status_message_guid),posts.id)",
                                        "description":"photos.text",
                                        "updated_at":"photos.updated_at",
                                        "created_at":"photos.created_at",
                                        "remote_url":"photos.remote_photo_path"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["comments"],
                            "toTables": [
                                {
                                    "table": "statuses",
                                    "conditions":{},
                                    "conjugate": {
                                        "conversation_id":"posts.id"
                                    },
                                    "mapping":{
                                        "conversation_id": "#REF(comments.commentable_id,posts.id)",
                                        "account_id": "#REF(comments.author_id,people.id)",
                                        "text":"comments.text",
                                        "created_at":"comments.created_at",
                                        "updated_at":"comments.updated_at",
                                        "visibility": "$visibility0",
                                        "reply":"$reply2",
                                        "in_reply_to_id":"#REF(comments.commentable_id,posts.id)"
                                    }
                                },
                                {
                                    "table": "status_stats",
                                    "conditions":{},
                                    "mapping":{
                                        "status_id":"#CONJUGATE(comments.id,comments.id)",
                                        "created_at":"comments.created_at",
                                        "updated_at":"comments.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["messages"],
                            "toTables": [
                                {
                                    "table": "statuses",
                                    "conditions":{},
                                    "mapping":{
                                        "account_id": "#CONJUGATE(messages.author_id,people.id)",
                                        "conversation_id":"#CONJUGATE(messages.conversation_id,conversations.id)",
                                        "text":"messages.text",
                                        "created_at":"messages.created_at",
                                        "updated_at":"messages.updated_at",
                                        "visibility": "$visibility3"
                                    }
                                },
                                {
                                    "table": "status_stats",
                                    "conditions":{},
                                    "mapping":{
                                        "status_id":"#CONJUGATE(messages.id,messages.id)",
                                        "created_at":"messages.created_at",
                                        "updated_at":"messages.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["conversations"],
                            "toTables": [
                                {
                                    "table": "conversations",
                                    "conditions":{},
                                    "mapping": {
                                        "created_at":"conversations.created_at",
                                        "updated_at":"conversations.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["likes"],
                            "toTables": [
                                {
                                    "table": "favourites",
                                    "conditions":{},
                                    "mapping": {
                                        "status_id":"#CONJUGATE(likes.target_id,posts.id)",
                                        "created_at":"likes.created_at",
                                        "updated_at":"likes.updated_at",
                                        "account_id":"#CONJUGATE(likes.author_id,people.id)"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["contacts"],
                            "toTables": [
                                {
                                    "table": "follows",
                                    "conditions": {
                                        "contacts.receiving": "true"
                                    },
                                    "mapping":{
                                        "created_at":"contacts.created_at",
                                        "updated_at":"contacts.updated_at",
                                        "account_id":"contacts.user_id",
                                        "target_account_id":"contacts.person_id"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["mentions"],
                            "toTables": [
                                {
                                    "table": "mentions",
                                    "conditions": {},
                                    "mapping":{ 
                                        "id":"mentions.id",
                                        "account_id":"mentions.person_id",
                                        "status_id":"mentions.mentions_container_id"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["notifications", "notification_actors"],
                            "toTables": [
                                {
                                    "table": "notifications",
                                    "conditions": {
                                    },
                                    "mapping":{ 
                                        "id":"notifications.id",
                                        "activity_type":"notifications.target_type",
                                        "account_id":"notifications.recipient_id",
                                        "from_account_id":"notification_actors.person_id",
                                        "activity_id":"notifications.target_id",
                                        "created_at":"notifications.created_at",
                                        "updated_at":"notifications.updated_at"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "twitter",
                    "methods": [],
                    "inputs": [
                        {
                            "name": "follow_action",
                            "value": "follow"
                        },
                        {
                            "name": "creator",
                            "value": "creator"
                        }
                    ],
                    "mappings": [
                        {
                            "fromTables": ["users","people","profiles"],
                            "toTables": [
                                {
                                    "table": "users",
                                    "conditions":{},
                                    "mapping": {
                                        "id":"people.id",
                                        "name":"users.username",
                                        "created_at":"users.created_at",
                                        "updated_at":"users.updated_at",
                                        "handle":"people.diaspora_handle",
                                        "bio":"profiles.bio",
                                        "avatar":"profiles.image_url"
                                    }
                                },
                                {
                                    "table": "credentials",
                                    "conditions":{},
                                    "mapping": {
                                        "id":"users.id",
                                        "email":"users.email",
                                        "password":"users.encrypted_password",
                                        "created_at":"users.created_at",
                                        "updated_at":"users.updated_at",
                                        "user_id":"people.id"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["posts"],
                            "toTables": [
                                {
                                    "table": "tweets",
                                    "conditions":{
                                        "posts.type": "StatusMessage"
                                    },
                                    "mapping": {
                                        "id":"posts.id",
                                        "user_id": "posts.author_id",
                                        "content":"posts.text",
                                        "created_at":"posts.created_at",
                                        "updated_at":"posts.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["comments"],
                            "toTables": [
                                {
                                    "table": "tweets",
                                    "conditions":{},
                                    "mapping":{
                                        "id":"comments.id",
                                        "user_id": "comments.author_id",
                                        "content":"comments.text",
                                        "created_at":"comments.created_at",
                                        "updated_at":"comments.updated_at",
                                        "reply_to_id":"#CONJUGATE(comments.commentable_id,posts.id)"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["messages"],
                            "toTables": [
                                {
                                    "table": "messages",
                                    "conditions":{},
                                    "mapping":{    
                                        "id":"messages.id",
                                        "user_id": "messages.author_id",
                                        "conversation_id":"messages.conversation_id",
                                        "content":"messages.text",
                                        "created_at":"messages.created_at",
                                        "updated_at":"messages.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["conversations", "conversation_visibilities"],
                            "toTables": [
                                {
                                    "table": "conversations",
                                    "conditions":{},
                                    "mapping": {
                                        "id":"conversations.id",
                                        "created_at":"conversations.created_at",
                                        "updated_at":"conversations.updated_at"
                                    }
                                },
                                {
                                    "table": "conversation_participants",
                                    "conditions":{},
                                    "mapping": {
                                        "id":"conversation_visibilities.id",
                                        "user_id":"conversation_visibilities.person_id",
                                        "conversation_id":"conversation_visibilities.conversation_id",
                                        "created_at":"conversation_visibilities.created_at",
                                        "updated_at":"conversation_visibilities.updated_at",
                                        "role": "$creator"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["likes"],
                            "toTables": [
                                {
                                    "table": "likes",
                                    "conditions":{},
                                    "mapping": {
                                        "id":"likes.id",
                                        "tweet_id":"likes.target_id",
                                        "created_at":"likes.created_at",
                                        "updated_at":"likes.updated_at",
                                        "user_id":"likes.author_id"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["contacts"],
                            "toTables": [
                                {
                                    "table": "user_actions",
                                    "conditions": {
                                        "contacts.receiving": "true"
                                    },
                                    "mapping":{ 
                                        "id":"contacts.id",
                                        "created_at":"contacts.created_at",
                                        "updated_at":"contacts.updated_at",
                                        "from_user_id":"contacts.user_id",
                                        "to_user_id":"contacts.person_id",
                                        "action_type": "$follow_action"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["notifications", "notification_actors"],
                            "toTables": [
                                {
                                    "table": "notifications",
                                    "conditions": {
                                    },
                                    "mapping":{ 
                                        "id":"notifications.id",
                                        "notification_type":"notifications.target_type",
                                        "user_id":"notifications.recipient_id",
                                        "from_user":"notification_actors.person_id",
                                        "tweet":"notifications.target_id",
                                        "created_at":"notifications.created_at",
                                        "updated_at":"notifications.updated_at"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "gnusocial",
                    "mappings": [
                        {
                            "fromTables": ["users", "people", "profiles"],
                            "toTables": [
                                {
                                    "table": "user",
                                    "mapping": {
                                        "id": "people.id",
                                        "nickname": "users.username",
                                        "email":"users.email",
                                        "language":"users.language",
                                        "created":"people.created_at",
                                        "modified":"people.updated_at"
                                    } 
                                },
                                {
                                    "table": "profile",
                                    "mapping": {
                                        "nickname": "users.username",
                                        "fullname":"profiles.full_name",
                                        "bio":"profiles.bio",
                                        "location":"profiles.location",
                                        "created":"profiles.created_at",
                                        "modified":"profiles.updated_at"
                                    } 
                                }
                            ]
                        },
                        {
                            "fromTables": ["contacts"],
                            "toTables": [
                                {
                                    "table": "subscription",
                                    "conditions": {
                                        "contacts.receiving": "true"
                                    },
                                    "mapping": {
                                        "subscriber": "contacts.user_id",
                                        "subscribed": "contacts.person_id",
                                        "created": "contacts.created_at",
                                        "modified": "contacts.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["posts"],
                            "toTables": [
                                {
                                    "table": "notice",
                                    "conditions":{
                                        "posts.type": "StatusMessage"
                                    },
                                    "mapping": {
                                        "id": "posts.id",
                                        "content": "posts.text",
                                        "profile_id": "posts.author_id",
                                        "created": "posts.created_at",
                                        "modified":"posts.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["photos"],
                            "toTables": [
                                {
                                    "table": "file",
                                    "conditions":{},
                                    "media": {
                                        "path": "photos.remote_photo_path"
                                    },
                                    "mapping": {
                                        "id": "photos.id",
                                        "url": "photos.remote_photo_path",
                                        "filename": "photos.remote_photo_name",
                                        "date": "photos.created_at",
                                        "modified": "photos.updated_at",
                                        "width": "photos.width",
                                        "height": "photos.height",
                                        "profile_id": "photos.author_id"
                                    }
                                },
                                {
                                    "table": "file_to_post",
                                    "conditions":{},
                                    "mapping": {
                                        "file_id": "photos.id",
                                        "post_id": "#FETCH(posts.id,posts.guid,photos.status_message_guid)",
                                        "modified": "photos.updated_at"
                                    }
                                }
                            ]
                        },
                        {
                            "fromTables": ["comments"],
                            "toTables": [
                                {
                                    "table": "notice",
                                    "mapping" : {
                                        "id": "comments.id",
                                        "reply_to": "comments.commentable_id",
                                        "profile_id": "comments.author_id",
                                        "content": "comments.text",
                                        "created": "comments.created_at",
                                        "modified": "comments.updated_at"
                                    }            
                                }
                            ]
                        },
                        {
                            "fromTables": ["likes"],
                            "toTables": [
                                {
                                    "table": "fave",
                                    "mapping": {
                                        "user_id": "likes.author_id",
                                        "notice_id": "likes.target_id",
                                        "created": "likes.created_at",
                                        "modified": "likes.updated_at"
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        }    
    ]
}